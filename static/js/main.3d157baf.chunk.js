(window["webpackJsonpweb-gl"]=window["webpackJsonpweb-gl"]||[]).push([[0],{30:function(e,t,n){e.exports=n(41)},35:function(e,t,n){},36:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a,r=n(2),o=n.n(r),i=n(15),c=n.n(i);n(35),n(36);!function(e){e.SET_CONTEXT="SET_CONTEXT"}(a||(a={}));var u,d={context:void 0};!function(e){e.ROTATE="ROTATE",e.TRANSLATE="TRANSLATE",e.SCALE="SCALE",e.MODIFY_SCALE="MODIFY_SCALE",e.MODIFY_ROTATION="MODIFY_ROTATION",e.SET_ANCHOR="SET_ANCHOR",e.SET_ORIGINAL_ROTATION="SET_ORIGINAL_ROTATION",e.SET_ROTATION_DELTA="SET_ROTATION_DELTA",e.CALC_ROT="CALC_ROT"}(u||(u={}));var s=n(43),l=n(4);function O(e){return function(t,n){return void 0===t?null:n.type!==e?t:n.payload}}var b=O(u.SET_ANCHOR),v=O(u.SET_ORIGINAL_ROTATION),h=O(u.SET_ROTATION_DELTA);var f=Object(l.c)({rotation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],t=arguments.length>1?arguments[1]:void 0;if(!t.payload)return e;switch(t.type){case u.ROTATE:return t.payload;case u.MODIFY_ROTATION:return Object(s.a)(e,t.payload).valueOf();default:return e}},translation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],t=arguments.length>1?arguments[1]:void 0;return t.type!==u.TRANSLATE?e:null===t.payload?e:t.payload},scale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,1,1],t=arguments.length>1?arguments[1]:void 0;if(!t.payload)return e;switch(t.type){case u.SCALE:return t.payload;case u.MODIFY_SCALE:return Object(s.a)(e,t.payload).valueOf();default:return e}},anchor:b,originalRotation:v,rotationDelta:h}),T=function(e){return function(t){return{type:e,payload:t}}},p=T("UPDATE_BOX"),E=T("UPDATE_BEAM_BOX"),w=Object(s.c)([[0,0,0],[20,40,10],[0,0,0]]),A=Object(s.c)([[-100,0,0],[200,200,4],[0,Math.PI/2,0]]),R=Object(l.c)({beamBox:function(e,t){return void 0===e?A:"UPDATE_BEAM_BOX"===t.type?Object(s.a)(t.payload,e):e},box:function(e,t){return void 0===e?w:"UPDATE_BOX"===t.type?Object(s.a)(t.payload,e):e},rays:function(e,t){if(void 0===e)return 1;switch(t.type){case"INC_RAYS":return e+1;case"DEC_RAYS":var n=e-1;return n>=0?n:0;default:return e}}}),m=Object(l.c)({webgl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;if(void 0===t)return e;switch(t.type){case a.SET_CONTEXT:return{context:t.payload};default:return e}},projections:f,radon:R}),_=n(16),y=n(28),j=n(13),S=n(12),I=n(14),g=n(11),C=n(23),L=n(6),N=n(29),D=n(0),x=function(e,t,n){return new D.s(e,t,n)};function B(e,t){return e.subset(Object(s.b)(t,[0,1,2])).toArray()[0]}function X(e){var t=B(e,0),n=Object(L.a)(t,3),a=n[0],r=n[1],o=n[2],i=B(e,1),c=Object(L.a)(i,3),u=c[0],d=c[1],s=c[2],l=B(e,2),O=Object(L.a)(l,3),b=O[0],v=O[1],h=O[2],f=new D.a(u,d,s);return f.translate(a,r,o),f.rotateX(b),f.rotateY(v),f.rotateZ(h),new D.h(f,function(e){var t=function(){return new D.b(e.x,e.y,e.z)};return new D.j({specular:t(),color:t().addScalar(-.3),emissive:t().addScalar(-.8),shininess:50,wireframe:!1,side:D.d})}(x(0,0,1)))}var Y=function(e,t,n){var a=B(t,0)[1],r=B(t,1),o=Object(L.a)(r,2),i=o[0],c=o[1],u=document.createElement("canvas");u.height=c,u.width=i;var d=u.getContext("2d");if(null!==d){for(var s=d.createImageData(i,c),l=0;l<n;l++)for(var O=Math.floor(a+l*(c/n)+c/(2*n))*i*4,b=O+4*i,v=O;v<b;v+=4)s.data[v]=255,s.data[v+1]=255,s.data[v+2]=255,s.data[v+3]=255;d.putImageData(s,0,0);var h=(new D.q).load(u.toDataURL("image/png")),f=new D.i({map:h,transparent:!0}),T=new D.l(i,c);return new D.h(T,f)}},M=function(){function e(t){var n=this;Object(g.a)(this,e),this.webGLRenderer=void 0,this.camera=void 0,this.scene=void 0,this.oc=void 0,this.webGLRenderer=new D.t,this.webGLRenderer.setSize(window.innerWidth,window.innerHeight),this.webGLRenderer.setPixelRatio(window.devicePixelRatio),this.scene=new D.n,this.camera=new D.k(80,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.x=100,this.camera.position.y=0,this.camera.position.z=0,console.log("adding orbit controls");var a=new D.c(16645629,2);a.position.set(2,2,1).normalize(),this.scene.add(a),this.oc=new N.a(this.camera),t.forEach(function(e){return n.scene.add(e)})}return Object(C.a)(e,[{key:"onDrag",value:function(e){this.oc.addEventListener("drag",e)}},{key:"render",value:function(){var e=this;return this.webGLRenderer.render(this.scene,this.camera),o.a.createElement("div",{id:"scene-container",ref:function(t){return t?t.appendChild(e.webGLRenderer.domElement):""}})}}]),e}();var k=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(j.a)(this,Object(S.a)(t).call(this,e))).rs=void 0,n.b=void 0,n.bb=void 0,setInterval(function(){return n.props.rotateBeamBox(.01)},10),n.b=X(n.props.box),n.bb=function(e,t,n){var a=B(t,0),r=Object(L.a)(a,3),o=r[0],i=r[1],c=r[2],u=B(t,1),d=Object(L.a)(u,3),l=d[0],O=d[1],b=d[2],v=B(t,2),h=Object(L.a)(v,3),f=h[0],T=h[1],p=h[2],E=new D.f,w=l/100,A=X(Object(s.c)([[o,i,c],[w,O,b],[0,0,0]])),R=X(Object(s.c)([[o+l,i,c],[w,O,b],[0,0,0]])),m=Y(e,t,n);return void 0!==m&&E.add(m),E.add(A),E.add(R),E.rotateX(f),E.rotateY(T),E.rotateZ(p),E}(n.b,n.props.beamBox,n.props.numRays),n.rs=new M([n.b,n.bb]),n}return Object(I.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return this.b.rotateX(.01),o.a.createElement("div",null,o.a.createElement("div",{id:"controls",style:{position:"absolute"}},o.a.createElement("button",{onClick:this.props.incRays},"Add Beam"),o.a.createElement("button",{onClick:this.props.decRays},"Remove Beam")),this.rs.render())}}]),t}(r.Component),G=function(e){return Object(s.c)([[0,0,0],[0,0,0],[e,0,0]])},P=Object(_.b)(function(e){return{box:e.radon.box,beamBox:e.radon.beamBox,numRays:e.radon.rays}},function(e){return{rotateBox:function(t){return e(p(G(t)))},rotateBeamBox:function(t){return e(E(G(t)))},incRays:function(){return e({type:"INC_RAYS"})},decRays:function(){return e({type:"DEC_RAYS"})}}})(k),F=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,U=Object(l.e)(m,F(Object(l.a)(y.a))),H=function(){return o.a.createElement(_.a,{store:U},o.a.createElement(P,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,1,2]]]);
//# sourceMappingURL=main.3d157baf.chunk.js.map